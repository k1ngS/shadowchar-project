<h4>Talentos</h4>

@if (characterTalents$ | async; as characterTalents) {
  <ul class="talent-list">
    @for (ct of characterTalents; track ct.id) {
      <li>
        <div class="talent-item">
          <div>
            <strong>{{ ct.talent.name }}</strong> (Tier: {{ ct.talent.tier }})
            @if (ct.talent.description) {
              <p>{{ ct.talent.description }}</p>
            }
          </div>
          <button (click)="onRemoveTalent(ct.talent.id)" class="remove-btn">
            &times;
          </button>
        </div>
      </li>
    } @empty {
      <p>Nenhum talento adicionado ainda.</p>
    }
  </ul>
} @else {
  <p>Carregando talentos...</p>
}

<hr />

<h5>Adicionar Talento</h5>
<form [formGroup]="talentForm" (ngSubmit)="onSubmit()">
  @if (availableTalents$ | async; as availableTalents) {
    <div>
      <label for="talent-select">Escolha um Talento:</label>
      <select id="talent-select" formControlName="talentId">
        <option [ngValue]="null" disabled>Selecione...</option>
        @for (talent of availableTalents; track talent.id) {
          <option
            [ngValue]="talent.id"
            [disabled]="!talent.available"
            [title]="talent.available ? '' : talent.reason"
          >
            {{ talent.name }} {{ !talent.available ? '(Indispon√≠vel)' : '' }}
          </option>
        }
      </select>
    </div>
  }

  <button type="submit" [disabled]="!talentForm.valid">Adicionar</button>
</form>
